---
title: Moana 2
fmContentType: page
studio: Disney Animation
releaseYear: 2014
visible: true
image: "../../assets/work/moana2.jpg"
description: "Magic"
order: 2
---

In the movie when the people pass away, they turn into a sea animal. Moana's ancestor geather around Maui's underwater airbubble and chant a song to bring Moana back to life.
The ancestor's animal is a whale shark. It's huge compare to his human form so we have to figure out a way to cover that.
The water bubbles and fx on it was done by another fx artist, so I got the geometry surface from him.
As a fx artist, my first instinct was of course a splash, like I did for wade breaking out of the pipe in Elemental.
But the direction was different, it was a more somba moment so it has to be more magical effects.
using the bioluminacent

Then we tried a couple different ideas
The first logical attept was to have a ripple:
There are so many ways to do ripple in Houdini. The ripple solver was obvious choice
source shapes
[ripple gif]
it works well but it's lacking some magical quality
[]
shadow water solver

![looking up from below](https://upload.wikimedia.org/wikipedia/commons/thumb/7/77/US_Navy_110607-N-XD935-191_Navy_Diver_2nd_Class_Ryan_Arnold%2C_assigned_to_Mobile_Diving_and_Salvage_Unit_2%2C_snorkels_on_the_surface_to_monitor_multi.jpg/1920px-US_Navy_110607-N-XD935-191_Navy_Diver_2nd_Class_Ryan_Arnold%2C_assigned_to_Mobile_Diving_and_Salvage_Unit_2%2C_snorkels_on_the_surface_to_monitor_multi.jpg)
![water](https://images.pexels.com/photos/4666754/pexels-photo-4666754.jpeg)
![god ray](https://images.pexels.com/photos/7826348/pexels-photo-7826348.jpeg)


In water sim, usually the most visible element is not the water itself, but the whitewater. The details are in the white water particles so I tried some of it
white wate solver scene
![whale bubble feeding](https://upload.wikimedia.org/wikipedia/commons/3/3a/Humpback_whale_bubble_net_feeding_Christin_Khan_NOAA.jpg)

One problem it's the ripple solver doesn't have a velocity attribute output, since the water just rising up and down. We can 
Custom ripples with circles and get the velocity from the circles

whitewater
There was a solver called chain solver in the studio, I opened the hda and found out the way it was done.
It was using Principle Component Analysis add force to the particle so they form a stringly look like foam patten
1. center the patch 
2. create covariance matrix
3. calculate the eigan vector and value
The perpendicular vector of eigan vector is the direction to make it more string like
I haven't attempt to recreate it but I used the existing PCA nodes in houdini to outline the theory
https://www.sidefx.com/contentlibrary/pca-dejitter/


The light
It started from whale glow and slowing turn into shadow, at the same time a slow sphere glow from the center. Then circliar light slowly grow to a human shape and a human shadow slowly appears.

Human shape light
caustic light 
radian light









ancestor magic
particles magic
whitewater
light ray
caustics
compositing
