[["Map",1,2,9,10,77,78,246,247],"meta::meta",["Map",3,4,5,6,7,8],"astro-version","5.13.8","content-config-digest","c5603d4c4d8e5c96","astro-config-digest","{\"root\":{},\"srcDir\":{},\"publicDir\":{},\"outDir\":{},\"cacheDir\":{},\"site\":\"https://cmhben.com\",\"compressHTML\":true,\"base\":\"/\",\"trailingSlash\":\"always\",\"output\":\"static\",\"scopedStyleStrategy\":\"attribute\",\"build\":{\"format\":\"directory\",\"client\":{},\"server\":{},\"assets\":\"_astro\",\"serverEntry\":\"entry.mjs\",\"redirects\":true,\"inlineStylesheets\":\"auto\",\"concurrency\":1},\"server\":{\"open\":false,\"host\":false,\"port\":4321,\"streaming\":true,\"allowedHosts\":[]},\"redirects\":{},\"image\":{\"endpoint\":{\"route\":\"/_image/\"},\"service\":{\"entrypoint\":\"astro/assets/services/sharp\",\"config\":{}},\"domains\":[],\"remotePatterns\":[],\"responsiveStyles\":false},\"devToolbar\":{\"enabled\":true},\"markdown\":{\"syntaxHighlight\":{\"type\":\"shiki\",\"excludeLangs\":[\"math\"]},\"shikiConfig\":{\"langs\":[],\"langAlias\":{},\"theme\":\"github-dark\",\"themes\":{},\"wrap\":false,\"transformers\":[]},\"remarkPlugins\":[],\"rehypePlugins\":[],\"remarkRehype\":{},\"gfm\":true,\"smartypants\":true},\"security\":{\"checkOrigin\":true},\"env\":{\"schema\":{},\"validateSecrets\":false},\"experimental\":{\"clientPrerender\":false,\"contentIntellisense\":false,\"headingIdCompat\":false,\"preserveScriptOrder\":false,\"liveContentCollections\":false,\"csp\":false,\"staticImportMetaEnv\":false,\"chromeDevtoolsWorkspace\":false},\"legacy\":{\"collections\":false}}","blog",["Map",11,12,25,26,38,39,50,51,63,64],"exploring-houdini-volumes-tips-and-techniques",{"id":11,"data":13,"body":21,"filePath":22,"digest":23,"deferredRender":24},{"title":14,"pubDate":15,"lastmod":16,"visible":17,"description":18,"tags":19},"Exploring Houdini Volumes: Tips and Techniques",["Date","2025-01-15T18:50:42.419Z"],["Date","2025-01-15T18:50:42.420Z"],false,"Volume simulation in Houdini",[20],"houdini","# Houdini minimalist\n\n# Pyro\n## Creating source\npolygon to volume with vdb\n- more simple but noise is harder to control compare to particles\npoint to volume\n- better control with attributes on points\n- rasterize after\n### Volumerasteriseattributes\n#### Coverage\nName of the point attribute that stores the coverage (or influence) of each particle. If the coverage attribute does not exist, \neach particle is assumed to have a coverage of 1.\n#### Attribute Rules\nDifferent ways to interpolate particles values into voxel, control per attributes","src/content/blog/exploring-houdini-volumes-tips-and-techniques.mdx","1e427d9e7e00d0d9",true,"ffmpeg-cheatsheet",{"id":25,"data":27,"body":35,"filePath":36,"digest":37,"deferredRender":24},{"title":28,"pubDate":29,"lastmod":30,"visible":17,"description":31,"tags":32},"ffmpeg cheatsheet",["Date","2025-01-08T20:38:15.371Z"],["Date","2025-01-08T20:38:16.024Z"],"Cheat sheet for using ffmpeg to convert files, video to frames, frames to video",[33,34],"ffmpeg","script","```bash\nvideo to gif\nffmpeg  -i invideo.mp4 -vf \"palettegen\" -y out_palette.png\nffmpeg  -i invideo.mp4 -i out_palette.png -lavfi \"paletteuse\" -y out.gif\n\n\npic to h.264 mp4\nffmpeg -r 60 -f image2 -s 1920x1080 -i pic%04d.png -vcodec libx264 -crf 25  -pix_fmt yuv420p test.mp4\n-r is the framerate (fps)\n-crf is the quality, lower means better quality, 15-25 is usually good\n-s is the resolution\n-pix_fmt yuv420p specifies the pixel format, change this as needed\n\nshow list of supported codecs:\nffmpeg -codecs\nffmpeg -formats\n\nmultithreading\nuse all threads\n-threads 0\n\nffmpeg -i jumper_breakdown.mov -r 24 -vcodec libx264 -crf 16 -pix_fmt yuv420p -c:a libfdk_aac -b:a 320k -vbr 3 -threads 0 jumper_breakdown_low.mov\n\n\nffmpeg -f image2 -start_number 1480 -i electric_v1.%d.png -vf \"palettegen\" -y out_platette.png\n\nffmpeg -i byProcessionBreakdown.mov -r 24 -vcodec libx264 -crf 25 -pix_fmt yuv420p -threads 0 byProcessionBreakdown_low.mov\n```","src/content/blog/ffmpeg-cheatsheet.mdx","2263213089da28a1","file-processing-with-python",{"id":38,"data":40,"body":47,"filePath":48,"digest":49,"deferredRender":24},{"title":41,"pubDate":42,"lastmod":43,"visible":17,"description":44,"tags":45},"file processing with Python",["Date","2025-01-08T20:40:47.528Z"],["Date","2025-01-08T20:40:47.528Z"],"Code I used in the pass to process files with python",[46],"Python","```python\n\nfrom os import listdir, rename\nfrom os.path import abspath, split, join,splitext\nimport sys\nimport glob\n\ndef main():\n\ttdir = abspath(sys.argv[1])\n\tpaths = listdir(tdir)\n\tfor path in paths:\n\t\tfilepath, ext = splitext(path)\n\t\thead, filename = split(filepath)\n\t\tif (filename[-3:]==\"(1)\"):\n\t\t\tnewpath = join(tdir,filename[:-4]+ext)\n\t\t\tprint join(tdir,path)\n\t\t\tprint newpath\n\t\t\trename(join(tdir,path),newpath)\n\nif __name__ == \"__main__\":\n\tmain()\n```","src/content/blog/file-processing-with-python.mdx","3d3c322e734c8f73","moviepy",{"id":50,"data":52,"body":60,"filePath":61,"digest":62,"deferredRender":24},{"title":53,"pubDate":54,"lastmod":55,"visible":17,"description":56,"tags":57},"Procedural Reel with Moviepy ",["Date","2025-01-07T02:39:28.272Z"],["Date","2025-01-08T00:16:42.720Z"],"Editing my demo reel with Moviepy python lib",[58,59,50],"python","video","# Automating my demo reel \nI started using nixos on my server, it's a procedural os so every settings of the computer is defined in the configuration file. For my reel, why can't it do the same?\n- https://www.youtube.com/watch?v=BBFub0zErFA\n- https://zulko.github.io/moviepy/getting_started/index.html\n\n## Editing\n\n## Combining\n## Adding text\n## Front and end\n\n## Issue encounter\nCompositing a compositVideoClip on a video cause the edge to be pixalated. It looks like it's an alpha issue. To get around this, I just export the text as individual object,\ninstead of a compositVideoClip. \n[Probably related bug](https://github.com/Zulko/moviepy/issues/1472)\n\n```python\ncombine_clip_text =CompositeVideoClip([title_clip,studio_clip,description_clip],size=(1920*2,1080*2))\ncombine_clip =CompositeVideoClip(video,combine_clip_text)\n```","src/content/blog/moviepy.mdx","67be6d77b226e0a6","simple-compositing-with-houdini-copernicus",{"id":63,"data":65,"body":74,"filePath":75,"digest":76,"deferredRender":24},{"title":66,"pubDate":67,"lastmod":68,"visible":17,"description":69,"tags":70},"Simple compositing with Houdini Copernicus",["Date","2025-01-07T05:03:25.899Z"],["Date","2025-01-07T05:03:25.899Z"],"Houdini Copernicus\n",[71,72,73],"Copernicus","Houdini","Compositing","# How to use Copernicus the wrong way\n> **`WIP post`**\n- I was trying to use **Copernicus** as a Nuke replacement, \n- there isn't a redirection of what replace what \n\n\n> TODO:\n> - pictures of node, examples\n## Common nodes nuke equivalent\n| Copernicus |  Nuke|\n|--------|----|\n| File | Read|\n| over | blend|\n| noise | fractalnoise|\n| remap | fit+ramp|\n| bright | grade gain|\n| hsv | satuation, value, hue|\n| transform | transform|\n| channel swap/add/split/extract | shuffle|\n| glow | glow|\n\n### Interesting nodes\n- dilateerode = dilate\n- chromaticaberration\n\n## tutorials\n- https://www.youtube.com/watch?v=ZPL215vfNwg\n- https://thevfxmentor.com/quicktips/COP\n- https://www.sidefx.com/docs/houdini/copernicus/working_with_cops.html","src/content/blog/simple-compositing-with-houdini-copernicus.mdx","dddf98bd27ad13e4","works",["Map",79,80,93,94,106,107,117,118,130,131,138,139,149,150,160,161,169,170,179,180,193,194,205,206,212,213,217,218,227,228,234,235,241,242],"invasion_s3",{"id":79,"data":81,"body":88,"filePath":89,"assetImports":90,"digest":92,"deferredRender":24},{"title":82,"description":83,"releaseYear":84,"studio":85,"visible":17,"order":86,"image":87},"Invasion S3","star fx",2014,"Disney Animation",4,"__ASTRO_IMAGE_../../assets/work/wish.jpg","procedural lightning, solar flare\nWide shot lightning \nRe-factor forground procedural lightning/signal fx on wall to wide angle, optimizing detail base on distance from camera","src/content/work/Invasion_s3.mdx",[91],"../../assets/work/wish.jpg","81a2192063be7eea","alien",{"id":93,"data":95,"body":101,"filePath":102,"assetImports":103,"digest":105,"deferredRender":24},{"title":96,"description":97,"releaseYear":98,"studio":85,"visible":24,"order":99,"image":100},"Alien Romulus","Zero gravity acid",2024,1,"__ASTRO_IMAGE_../../assets/work/alien.jpg","import { Image, Picture } from 'astro:assets';\nimport { YouTube } from 'astro-embed';\nimport cover from \"../../assets/work/alien.jpg\";\n\n\u003CImage src={cover} alt=\"cover\" /> \n\n# Zero gravity spinning acid\nIn the sequence, gravity is disabled so when the alien is shot, the acid floats freely. The acid spins along the corridor and forms a tunnel with an open center, leaving room for characters to move through. For this article I re-created the setup and broke it down into smaller, reusable components for future reference.\n\n\u003Cvideo src=\"alien/alien_acid_v00009.deformation.v001.webm\" controls autoplay muted playsinline loop>\u003C/video>\n\n\n# Generating Acid caches\n## Reference\n![paintball](/alien/paintball_reference_v001.png)\n\u003CYouTube id=\"0fP_k6y9ows\" params=\"start=225\" />\nThe acid should read as directional and stringy, like a hand reaching out. It moves slowly, feels dangerous, and drifts through space.\n\n## Simulation\n![splash source](/alien/splash_source_v003.png)\n## Source\n![splash source cluster](/alien/splash_source_v001.png)\n1.  Deform and transform the source, then use the difference from the original position to create velocity.\n![dopnet](/alien/splash_source_v002.png)\n2. Group points by cluster to create structure. Randomize velocity per-cluster to produce a stringy look; set some cluster velocities to zero to encourage tearing. An alternative is converting the source to geometry, fracturing it, and exploding pieces with an RBD solver to generate initial velocity.\n\n## Solver\nThe most important parameters are scale and surface tension. Scene scale usually needs to be larger than real world to preserve small details. I use a top wedging workflow to find suitable liquid values.\n### solver settings\n\n1. Surface oversampling helps with keeping the stingy look by adding particles in the thin area (Example values: particles per voxel:10, surface oversampling:2, oversampling Bandwidth:1.8)\n2. Particle separation keeps points evenly distributed in thin films and reduces holes and popping.\n3. Increasing resolution (reducing grid scale) gives better support for thin features. \n4.  Other useful changes: raise max substeps, enable vorticity and id\n\n#### Wedging setup\n![topnet](/alien/splash_topnet_v001.png)\n1. Wedging attributes\n    ![topnet](/alien/splash_topnet_v002.png)\n    Wedging the velocity noise size and surface tension to find the right look\n![wedge](/alien/splash_wedge_v001.png)\n2. Use OpenImageIO for adding details into the picture\n![wedge](/alien/splash_topnet_v003.png)\n3. Use ImageMagick to combine image for montage\n4. Collect wedges\n  ![loading wedge](/alien/collect_wedges_sop_v001.png)\n  ```c\n  string wedge_list[] = split(chs(\"wedge_list\"),\" \");\n  for(int i=0; i\u003Clen(wedge_list);i++){\n      int id = addpoint(0,set(0,0,0));\n      setpointattrib(0,\"wedge\",id,wedge_list[i]);\n  }\n  ```\n\n\n### Results\n\u003Cvideo src=\"alien/alien_acid_v00003.webm\" controls autoplay muted playsinline loop>\u003C/video>\n\u003Cvideo src=\"alien/alien_acid_v00006.webm\" controls autoplay muted playsinline loop>\u003C/video>\n\u003Cvideo src=\"alien/alien_acid_v00007.webm\" controls autoplay muted playsinline loop>\u003C/video>\n\u003Cvideo src=\"alien/alien_acid_v00008.webm\" controls autoplay muted playsinline loop>\u003C/video>\n\n\n\nOther useful resource for surface tension:\nhttps://medium.com/@vupham_37726/houdini-flip-surface-tension-demystified-f1239da880ce\n\n\n# VDB Advection with velocity field\nWhile FLIP simulation provides detailed fluid animation, procedural post-sim advection gives greater control for composition and layout.\n\n## Advection setup\n### Vdb advect points\nApplying a ramp to the advected field scales the deformation by distance from the core. This creates organic motion but can over-distort if run too long. A common approach is to use two advection passes: one that moves the whole piece for large scale movement and a second per-point advection for finer deformation.\nUsing a static VDB advect point to set initial positions and an animated VDB advect point for motion works well:\n![vdb advect points](/alien/curve_vel_sop_v002.png)\n### Local roll\n```c\nvector4 original_orient = p@orient;\nmatrix3 m = qconvert(original_orient);\nprerotate(m,radians(ch(\"amount\")*@rotate_speed*(@Frame+ch(\"frame_offset\"))),chv(\"rotate\"));\np@orient = quaternion(m);\n```\n\n### velocity field\nThis builds the velocity field from a curve, useful for both simulation and post-sim deformation:\n![vel field network](/alien/curve_vel_sop_v001.png)\n\u003Cdiv> Follow, suction and orbit:\u003C/div>\n\u003Cdiv class=\"flex\">\n\u003Cdiv class= \"w-1/3\">\u003Cimg src=\"/alien/curve_vel_sop_v003.follow.png\" />\u003C/div>\n\u003Cdiv class= \"w-1/3\"> \u003Cimg src=\"/alien/curve_vel_sop_v003.suction.png\" />\u003C/div>\n\u003Cdiv class= \"w-1/3\">\u003Cimg src=\"/alien/curve_vel_sop_v003.orbit.png\" />\u003C/div>\n\u003C/div>\n\ncurve_vel_field wrangle:\n``` c\n// runs on volume with vector field vel\nint prim;\nvector primuv;\nfloat radius = ch(\"radius\");\nfloat dist = xyzdist(1,v@P,prim,primuv);\nvector N = primuv(1,\"N\",prim,primuv);\nvector P = primuv(1,\"P\",prim,primuv);\n//prep\nfloat r_normalize = fit(dist,0,radius,0,1);\nfloat mask = (dist>radius)? 0:1;\n//follow\nvector follow_dir = normalize(N);\nfloat follow_mult = ch(\"follow_mult\");\nfloat follow_ramp_r = chramp(\"follow_ramp_radius\",r_normalize);\n// suction\nvector suction_dir = normalize(P-v@P);\nfloat suction_mult = ch(\"suction_mult\");\nfloat suction_ramp_r = chramp(\"suction_ramp_radius\",r_normalize);\n// orbit\nvector orbit_dir = normalize(cross(follow_dir,suction_dir));\nfloat orbit_mult = ch(\"orbit_mult\");\nfloat orbit_ramp_r = chramp(\"orbit_ramp_radius\",r_normalize);\n\nv@vel = follow_dir*follow_mult*follow_ramp_r;\nv@vel += suction_dir*suction_mult*suction_ramp_r;\nv@vel += orbit_dir*orbit_mult*orbit_ramp_r;\nv@vel *= mask;\n```\n\n{/*\n### Secondary elements\nSecondary effects include broken alien pieces, small acid droplets for fine detail, and smoke that is emitted when acid contacts walls.\n### Sparks\nGunshot sparks should match the film reference.\n\n# Notes\n- Hand placing the acid cache is more efficient for hero pieces for better art direction\n- Have a level of detail setup for faster iteration\n- Have a way to store randomized result for all versions\n*/}","src/content/work/alien.mdx",[104],"../../assets/work/alien.jpg","bf0abcf34931dff7","audi",{"id":106,"data":108,"body":112,"filePath":113,"assetImports":114,"digest":116,"deferredRender":24},{"title":109,"description":83,"releaseYear":84,"studio":85,"visible":17,"order":110,"image":111},"Audi e-tron",6,"__ASTRO_IMAGE_../../assets/work/audi.jpg","import { Image, Picture } from 'astro:assets';\nimport audi from \"../../assets/work/audi.jpg\";\n\n\u003CImage src={audi} alt=\"audi\" /> \n\nDevelop simulation and look for ice melting effect on the car surface for \"Audi e-tron\" commercial using multiple layers of procedural material building, mask animation and snow grain generation.\nTo-do: redo in Houdini 22","src/content/work/audi.mdx",[115],"../../assets/work/audi.jpg","65381f6084e2f579","byprocession",{"id":117,"data":119,"body":125,"filePath":126,"assetImports":127,"digest":129,"deferredRender":24},{"title":120,"description":121,"releaseYear":84,"studio":122,"visible":17,"order":123,"image":124},"By Procession","personal piece base on concept art","Personal",9,"__ASTRO_IMAGE_../../assets/work/byprocession.jpg","The demoreel project I did in Gnomon. I was unsure what direction I want to take in my career so I thought I would do a more generalist project.\nDoing fx in Maya was aweful and I just had my first class in Houdini  \n\nLightning\nRigging\nmodelling texturing\ncompositing tricks\ncamera effects","src/content/work/byprocession.mdx",[128],"../../assets/work/byprocession.jpg","8269a2fc6e658b37","capstone",{"id":130,"data":132,"body":134,"filePath":135,"assetImports":136,"digest":137,"deferredRender":24},{"title":133,"description":83,"releaseYear":84,"studio":85,"visible":17,"order":86,"image":87},"Wish","- Star breaking out of staff\n  - procedural animation \n  - Work with Visual efect designer for \n  - light ray radiating, merge in the second shot before star come out\n  - todo: talk about other shots as well\n  - math for rotating the ray\n  - variation on speed, line, color\n  - nuke compositing\n  - ray matching the shape of the staff crystal\n  - erode at the end\n\n\n  chicken dance","src/content/work/capstone.mdx",[91],"7ea62f50c2415962","dungeon_n_dragon",{"id":138,"data":140,"body":144,"filePath":145,"assetImports":146,"digest":148,"deferredRender":24},{"title":133,"description":83,"releaseYear":84,"studio":141,"visible":17,"order":142,"image":143},"ILM",7,"__ASTRO_IMAGE_../../assets/work/dnd.jpg","Smoke and portal\nrbd falling stuff\nlocal gravity","src/content/work/dungeon_n_dragon.mdx",[147],"../../assets/work/dnd.jpg","b98ab475113f25e5","elemental",{"id":149,"data":151,"body":155,"filePath":156,"assetImports":157,"digest":159,"deferredRender":24},{"title":152,"description":83,"releaseYear":84,"studio":85,"visible":17,"order":153,"image":154},"Elemental",5,"__ASTRO_IMAGE_../../assets/work/elemental.jpg","2. Elemental \n  - Wade breaking out of pipe\n  - 2 shots, one for trailer\n  - pipe water\n    - need to avoid the hand, head\n    - 3 water, slowly merge into 1\n    - water slower over time\n    - water splash as wade get out of the pipe, hide the initial shape deformed of wade when he is in the pipe\n    - cover camera when it reaches the water\n\n  - underwater\n    - bubbles\n    - inside and out side water are rendered separatly\n    - avoide covering ember's face\n    - swirling motion - use another volume solver for the velocity field (air field), enhanced velocity conservation\n\nHoudini examples: water pipe with guide\nbubbles\nhot source","src/content/work/elemental.mdx",[158],"../../assets/work/elemental.jpg","ce278d3bbd9258bc","equalizer",{"id":160,"data":162,"body":164,"filePath":165,"assetImports":166,"digest":168,"deferredRender":24},{"title":133,"description":83,"releaseYear":84,"studio":85,"visible":17,"order":123,"image":163},"__ASTRO_IMAGE_../../assets/work/obiwan.jpg","partition of smoke\nfalling leaves\nprocedural smoke","src/content/work/equalizer.mdx",[167],"../../assets/work/obiwan.jpg","0c947bffd86fab24","jurrassic",{"id":169,"data":171,"body":174,"filePath":175,"assetImports":176,"digest":178,"deferredRender":24},{"title":133,"description":83,"releaseYear":84,"studio":85,"visible":17,"order":172,"image":173},8,"__ASTRO_IMAGE_../../assets/work/jurassic.jpg","waterfall\nexplosion\n\nHoudini example: waterfall and bubbles\nline between above and below water","src/content/work/jurrassic.mdx",[177],"../../assets/work/jurassic.jpg","8d320167469ee0ac","mandalorian",{"id":179,"data":181,"body":188,"filePath":189,"assetImports":190,"digest":192,"deferredRender":24},{"title":182,"description":183,"releaseYear":184,"studio":185,"visible":17,"order":186,"image":187},"The Mandalorian Season 3","The Mandalorian Season 3 water fx",2013,"Industrial Light and magic",3,"__ASTRO_IMAGE_../../assets/work/mando3.jpg","- 1st episode of the Mandalorian\n  - crocodile + turtle attact people\n  - Custom solver for water \"nexus\" in Houdini\n  - Mostly running existing setup, but need to customize certain area, such as the legs moving so fast\n  - Simulation for all water elements\n\n  - beach water line\n  - steps splashing (left leg)\n  - monster pushing water to the shore\n  - right leg pushing water quick\n  - whitewater, spray, ...\n  - The challenge was some fast moving motion and the waterline need to be at a certain level.\n\n\n  - Houdini scene monster on beach setup","src/content/work/mandalorian.mdx",[191],"../../assets/work/mando3.jpg","1c06aaf013f6831b","moana",{"id":193,"data":195,"body":200,"filePath":201,"assetImports":202,"digest":204,"deferredRender":24},{"title":196,"description":197,"releaseYear":84,"studio":85,"visible":24,"order":198,"image":199},"Moana 2","Bioluminacent Magic for Ancestor transformation",2,"__ASTRO_IMAGE_../../assets/work/moana2.jpg","# Bioluminescent Magic for Ancestor Transformation\n\nimport { YouTube } from 'astro-embed';\n\n\u003CYouTube id=\"on-K551_8ac\" posterQuality=\"high\"/>\n\u003CYouTube id=\"TZa7V_qyAVA\" posterQuality=\"high\"/>\n\n## The task\n\nIn the film, when people pass away they transform into sea animals. In this sequence, Moana's ancestors gather around Maui's underwater air bubble and chant to bring Moana back to life. The ancestor's animal form is a whale shark, which is much larger than the human form. So we needed a way to cover that change smoothly.\n\n## Light\n\n![Looking up from below](https://upload.wikimedia.org/wikipedia/commons/thumb/7/77/US_Navy_110607-N-XD935-191_Navy_Diver_2nd_Class_Ryan_Arnold%2C_assigned_to_Mobile_Diving_and_Salvage_Unit_2%2C_snorkels_on_the_surface_to_monitor_multi.jpg/1920px-US_Navy_110607-N-XD935-191_Navy_Diver_2nd_Class_Ryan_Arnold%2C_assigned_to_Mobile_Diving_and_Salvage_Unit_2%2C_snorkels_on_the_surface_to_monitor_multi.jpg)\n\nThe idea starts from the whale's glow that slowly becomes shadow. At the same time a soft spherical glow grows from the center. Circular light expands into a human silhouette while a human shadow gradually appears.\n\n### Caustics\n\n![Caustic](/moana2/demoreel_screenshot_caustic.png)\n\n\u003Cvideo src=\"moana2/caustic.v0001.webm\" controls autoplay muted playsinline loop>\u003C/video>\n\nThe initial idea came from an [Entagma tutorial](https://www.youtube.com/watch?v=GPYlgxMaMQs). I adapted it to use a sphere as the light source and project points onto a curved surface so that the shapes get larger towards the edge and have a natural fading out without a mask.\n\n\u003Cvideo src=\"moana2/caustic.v0002.webm\" controls autoplay muted playsinline loop>\u003C/video>\n\n### Overall caustic setup\n\u003Cimg class=\"max-h-150\" src=\"moana2/caustics_sop.v0001.png\"/>\n\n1. set orign_N set the base direction from sphere to the project plane\n2. deform the sphere for the normal\n3. refract on the deformed sphere and project onto projection plane\n    ```c\n        vector ray_dir;\n        vector p2, uvw;\n        int prim;\n        // orig_N is the direction pointing from the sphere to the \n        // projection plane, N is the normal of the deforming sphere\n        ray_dir = refract(v@orig_N, v@N, ch(\"ior\"));\n        ray_dir *= 100;\n        // check intersection and project onto collider\n        v@ray_dir = ray_dir;\n        prim = intersect(1, v@P, ray_dir, p2, uvw);\n        if (prim == -1) {\n            removepoint(0, @ptnum);\n            v@Cd = 0;\n        } else {\n            v@Cd = primuv(1, \"Cd\", prim, uvw);\n            v@target_N = primuv(1, \"N\", prim, uvw);\n        }\n        v@P = p2;\n    ```\n4. Set density to filter out sparse area\n    ```c\n        float maxdist = ch(\"maxdist\");\n        int pts[] = nearpoints(0,v@P,maxdist);\n        float density = fit(len(pts),ch(\"min\"),ch(\"max\"),0,1);\n        @Cd = density;\n        @density = density;\n    ```\n5. Use blur sop to shapen and convert to volume\n\n### Whale mask (fading)\n\n\u003Cimg src=\"moana2/demoreel_screenshot_whalemask.png\" alt=\"Whale mask\"/>\n\nA simple mask generated from the whale shark silhouette, with a glow at the edge and animation driven by the glow source distance.\n\n### Ancestor emerging shadow\n\n\u003Cimg src=\"moana2/demoreel_screenshot_shadow.png\" alt=\"Ancestor emerging shadow\"/>\n\nThe whale is much bigger than the human, so to make the transformation feel smooth we have a shadow \"walk out\" as the whale turns into light and the human form emerges. After blurring and layering, the mask approximates the light shape you see when looking up from underwater (Snell's window).\n\n\u003Cvideo src=\"moana2/refraction.v0001.webm\" controls autoplay muted playsinline loop>\u003C/video>\n\nVEX for refraction/projection (similar to caustics):\n\n```c\n// get ray direction towards object\nvector dir = getbbox_center(1) - v@P;\ndir = v@rest_N;\nvector ray_dir = refract(dir, v@N, ch(\"ior\"));\n\n// emit ray from deforming surface and check collision\nvector p2, uvw;\nint prim;\nray_dir *= -100;\nprim = intersect(1, v@P, ray_dir, p2, uvw);\nv@ray_dir = ray_dir;\nif (prim == -1) {\n    v@Cd = 0;\n} else {\n    v@Cd = 1;\n    v@target_N = primuv(1, \"N\", prim, uvw);\n}\n```\n\n## Water surface contact\nInteraction with the water surface\nThen we tried a couple different ideas\nThe first logical attept was to have a ripple:\n### Ripple solver\n\nThere are many ways to create ripples in Houdini. The ripple solver is a straightforward choice: source the ripple from the distance between surfaces and apply a ramp to the height offset. It works well but lacks a \"magical\" quality and the shapes are not very clean.\n\n### Procedural circle ripples\n\n![Raindrop](https://images.pexels.com/photos/4396992/pexels-photo-4396992.jpeg)\n\nRain-drop-like circles are gentler. The circle solver gives outward velocity that trails the circle line, whereas the ripple solver primarily moves geometry up and down. It's render in RGB from @N for distortion in compositing\n\n#### Circle Ripple Setup \n\u003Cvideo src=\"moana2/circlesolver.v0001.webm\" controls autoplay muted playsinline loop>\u003C/video>\n\u003Cimg class=\"max-h-150\" src=\"moana2/circle_sop.v0001.png\"/>\n\n1. Animated circle by setting point attributes like trigger frame and life and calculate the pscale foreach point\n    ```c\n    //set age and scale\n    @age = @Frame- @trigger_frame;\n    @pscale = fit(@age,0,@life,v@pscale_range[0],v@pscale_range[1]);\n    v@center =v@P;\n    ```\n2. delete the whole circle before born, add variation to the points circles desolves gradually\n    ```c\n    //delete_after_death\n    float limit = fit(@age,@life*(.7+@death_offset),@life,0,1);\n    if(rand(@id)\u003Climit)\n        removepoint(0,@ptnum);\n    ```\n#### Displace Surface Setup\n\u003Cvideo src=\"moana2/circlesolver.v0002.webm\" controls autoplay muted playsinline loop>\u003C/video>\n\u003Cimg class=\"max-h-150\" src=\"moana2/circle_sop.v0002.png\"/>\n\n1. Offset on in camera z and project onto surface\n    ```c\n    matrix Op_Matrix= optransform(chsop(\"cam\")); \n    vector dir  = getbbox_center(0)-Op_Matrix*set(0,0,0);\n    v@dir = dir;\n    v@P += normalize(dir)*ch(\"mult\");\n    ```\n2. Copy attributes to surface and create mask base on distance from the circle lines\n    ```c\n    int prim;\n    vector primuv;\n    float dist = xyzdist(1,v@P,prim,primuv);\n    vector p = primuv(1,\"P\",prim,primuv);\n    @age = primuv(1,\"age\",prim,primuv);\n    @life = primuv(1,\"life\",prim,primuv);\n    @dist = length(p-v@P);\n    @mask = chramp(\"ramp\",fit(@dist,0,ch(\"maxdist\"),0,1));\n    ```\n3. Calculate height multiplyer with height, then apply displacement onto surface\n    ```c\n    v@rest_N = v@N;\n    float age_height =chramp(\"ramp\", fit(@age,0,@life,0,1));\n    v@P+= v@N*@mask*ch(\"mult\")*age_height;\n    ```\n## Bioluminescent particles\n\nReferencing the original movie where the grandmother ray swims by. As an FX artist my instinct was to create a big splash but the sequence needed a more somber, magical feeling.\n\n![Whale bubble feeding](https://upload.wikimedia.org/wikipedia/commons/3/3a/Humpback_whale_bubble_net_feeding_Christin_Khan_NOAA.jpg)\n\n### Whitewater shape solver\n\n\u003Cvideo src=\"moana2/biolumin.v0001.webm\" controls autoplay muted playsinline loop>\u003C/video>\n\nI used a existing studio solver for enhancing foam shape. It uses PCA to add forces so particles form stringy, foam-like patterns. Here is the overall process:\n1. Find all the particles in a patch around each point\n2. Center the patch.\n3. Create the covariance matrix.\n4. Calculate eigenvectors and eigenvalues.\n\nThe eigenvector basically represent the overall direction of the patch, using the perpendicular of the principal eigenvector as force aligns the particles along the eiganvector so there are more string like feature.\n\n\u003Cvideo src=\"moana2/chainsolver.v0002.webm\" controls autoplay muted playsinline loop>\u003C/video>\n\n#### SOP PCA\n\nHoudini has a SOP PCA implementation. It requires points to be arranged so each point stores neighbor positions. It's impractical for this use case here but helps illustrate the concept.\n\n![pca](/moana2/pca.v0001.png)\nSet neighbours wrangle:\n```c\n// for each point, store the neighbors and their position into arrays\n// search radius and max neighbours\nfloat proxrad = ch(\"proxrad\");\nint maxneigh = chi(\"maxneigh\");\nint pts[] = pcfind(0, \"P\", @P, proxrad, maxneigh);\nvector p_data[];\nfor (int i = 0; i \u003C maxneigh; i++) {\n    if (i \u003C len(pts)) {\n        p_data[i] = point(0, \"P\", pts[i]);\n    } else {\n        p_data[i] = v@P;\n    }\n}\ni[]@__neighbors__ = pts;\nv[]@p_data = p_data;\n```\nDuplicate neighbors wrangle:\n```c\n// the number of dimensions (number of neighbors)\n// this links to the current iteration of the for loop\nint iter = chi(\"iter\");\nvector new_p = v[]@p_data[iter-1];\nnew_p -= v@P;\naddpoint(0, new_p);\nremovepoint(0, @ptnum);\n\n```\n\nReferences:\n- Entagma tutorial: https://www.youtube.com/watch?v=GPYlgxMaMQs\n- SideFX PCA dejitter example: https://www.sidefx.com/contentlibrary/pca","src/content/work/moana.mdx",[203],"../../assets/work/moana2.jpg","68b639b1c09140c9","obiwan",{"id":205,"data":207,"body":208,"filePath":209,"assetImports":210,"digest":211,"deferredRender":24},{"title":133,"description":83,"releaseYear":84,"studio":85,"visible":17,"order":123,"image":163},"pre-cached smoke fx\nground smoke\ninteraction\natmos","src/content/work/obiwan.mdx",[167],"8bce559ae5064184","ornamic",{"id":212,"data":214,"body":134,"filePath":215,"assetImports":216,"digest":137,"deferredRender":24},{"title":133,"description":83,"releaseYear":84,"studio":85,"visible":17,"order":86,"image":87},"src/content/work/ornamic.mdx",[91],"restless",{"id":217,"data":219,"body":223,"filePath":224,"assetImports":225,"digest":226,"deferredRender":24},{"title":220,"description":83,"releaseYear":221,"studio":222,"visible":17,"order":86,"image":87},"Restless",2026,"Personal project","line animation","src/content/work/restless.mdx",[91],"26b1b718c4af1af2","superman",{"id":227,"data":229,"body":230,"filePath":231,"assetImports":232,"digest":233,"deferredRender":24},{"title":133,"description":83,"releaseYear":84,"studio":85,"visible":17,"order":86,"image":87},"cliff falling debris\nheightmap as collision\ncollider conservation\nrhythm of rocks falling","src/content/work/superman.mdx",[91],"5ad2d990ca078d22","water_drops_on_windows",{"id":234,"data":236,"body":237,"filePath":238,"assetImports":239,"digest":240,"deferredRender":24},{"title":133,"description":83,"releaseYear":84,"studio":122,"visible":17,"order":123,"image":124},"The demoreel project I did in Gnomon. I was unsure what direction I want to take in my career so I thought I would do a more generalist project.\nDoing fx in Maya was aweful and I just had my first class in Houdini  \n\nLightning\nRigging\nmodelling texturing","src/content/work/water_drops_on_windows.mdx",[128],"88842a1363e9dc3d","wish",{"id":241,"data":243,"body":134,"filePath":244,"assetImports":245,"digest":137,"deferredRender":24},{"title":133,"description":83,"releaseYear":84,"studio":85,"visible":17,"order":86,"image":87},"src/content/work/wish.mdx",[91],"pages",["Map",248,249,256,257,264,265,270,271,278,279,285,286],"about",{"id":248,"data":250,"body":253,"filePath":254,"digest":255,"deferredRender":24},{"title":251,"lastmod":252,"nav":17,"visible":17,"showdate":17},"About",["Date","2025-01-02T00:41:23.269Z"],"export const startDate = new Date(2018,1);\nexport const years = new Date(Date.now()-startDate).getUTCFullYear()-1970;\n\nI am a Fx artist specialize in Fx simulation and procedural animation.\nI am located in Los Angeles with {years} years of experience working at studios including Disney Animation, ILM, Pixar, Dreamworks TV and The Mill.\nI enjoys creating unique graphics and solving technical challenges with nodes and codes.\n\nWhen I am free I like to take pictures, bouldering and brew coffee.\n\n[About this website](/colophon)","src/content/pages/about.mdx","43ed10c518772928","colophon",{"id":256,"data":258,"body":261,"filePath":262,"digest":263,"deferredRender":24},{"title":259,"lastmod":260,"nav":17,"visible":17,"showdate":24},"Colophon",["Date","2025-01-16T23:04:22.991Z"],"import { Image, Picture } from 'astro:assets';\n\n# Colophon\nI build this website mostly for recording the more technical aspect of projects that is hard to show in a reel\n\nAlso for storing my notes and process when I work on project\nI want this site to look simple and unique, avoid cookie-cutter UI components\nLeave out planty of breathing room, only show necessary info\n\n## Features\n- Responsive design\n- Edit content using Markdown\n- Manage content with Frontmatter CMS in VSCode\n- Emojis\n  \u003CPicture class=\"emoji\" src=\"/emoji/Froggy.webp\" formats={['webp']} width=\"40\" height=\"40\" alt=\"froggy\" /> \n  \u003CPicture class=\"emoji\" src =\"/emoji/LC_worry_rave.GIF\" formats={['webp']} width=\"40\" height=\"40\" alt=\"froggy\"/>\n  https://discadia.com/emojis/?q=worry\n## Software\n- Astro\n- Tailwindcss \n- VSCode\n- Frontmatter CMS\n\n## Design\n### Look and feel\nMinimalist, only necessary info on the page, breathing room\n### icon\nplastic toy from houdini\ndrew in Procreate on ipad pro\n### Font\n- Roboto\n- Montserrat Variable\n- EB Garamond (not used but looks nice)\n\n\n>## TODO:\n> - reel breakdown, interactive with video player if possible\n> - image management system\n> - post index page, with description and image\n> - related post attribute\n> - Add a wiki site for storing info in case I forget things\n>  1. Fx related\n>      1. Fx reference like videos and images\n>      2. helpful tutorials\n>      3. Houdini nodes and vex usages\n>      4. python in Houdin\n>  2. machine learning\n>  3. website building \n>  4. personal hobbies - books, coffee,\n> Digital garden\n> - [personal wiki] \n>    - [personal knowlegebase](https://tomcritchlow.com/blogchains/digital-gardens/)\n>    - [garden history](https://maggieappleton.com/garden-history)\n  \n## Reference\n- Minimalist design\n  - [Negative space, cool color - mitchellh.com](https://mitchellh.com/)\n  - [Organic, texture, ](https://eva.town/)\n  - [https://angezanetti.com/](https://angezanetti.com/)\n  - [https://shud.in/thoughts/enlightment](https://shud.in/thoughts/enlightment)\n  - [Cool illustrations and effective style](https://sonnet.io/posts/hummingbirds/)\n  - [Simple monofonts](https://www.eddiedale.com/uses)\n  - [Less Minimalist, readble and stylish](https://maggieappleton.com/garden-history)\n- Full page image\n  - https://dgetz.co\n- Artist site\n  - [https://www.altcinc.com/info](https://www.altcinc.com/info)\n- 3d\n  - [https://peteroravec.com/](https://peteroravec.com/)\n- Website gallery\n  - [https://onepagelove.com/](https://onepagelove.com/)\n  - [https://brutalistwebsites.com/](https://brutalistwebsites.com/)\n  - [https://www.awwwards.com/awwwards/collections/minimal/](https://www.awwwards.com/awwwards/collections/minimal/)\n  - [Dead simple sites](https://deadsimplesites.com/)\n- Ultimate Minimalist\n  - [https://www.berkshirehathaway.com/](https://www.berkshirehathaway.com/)\n  - [http://bettermotherfuckingwebsite.com/](http://bettermotherfuckingwebsite.com)","src/content/pages/colophon.mdx","144b6f28185c6c8d","index",{"id":264,"data":266,"filePath":268,"digest":269,"deferredRender":24},{"title":264,"lastmod":267,"nav":17,"visible":17,"showdate":17},["Date","2025-01-03T01:29:06.864Z"],"src/content/pages/index.mdx","15ff4b2081b13ebc","now",{"id":270,"data":272,"body":275,"filePath":276,"digest":277,"deferredRender":24},{"title":273,"lastmod":274,"nav":17,"visible":17,"showdate":24},"Now",["Date","2025-07-10T19:17:39.458Z"],"## 2025-07\n\n- I built a new pc. My old pc is almost 10 years old. it was able to keep up most of my games and some 3d project but it starting to show its age.\n- Revisiting this website, aiming to get put this up and running. I finally get some time in-between jobs.\n- Working on personal project with RBD. Haven't got chace to workon Rigid body dynamics in projects yet. I am trying to work on some\n\n### Games\n- Started replaying Death stranding- Director's Cut and Baldur's Gate 3\n\n### Coffee\n- [Single Speed Coffee](https://singlespeedcoffeeroasters.com/)\n    - Ethiopia Yirgacheffe\n    - Floral, black tea, lemon, orange\n\n- [SEY Coffee](https://www.seycoffee.com/)\n    - Sike Bokossa\n    - Ethiopia Landrace -Washed\n    - Watermelon, peach, lemongrass\n\n### Book\n- Four Thousand Weeks: Time Management for Mortals\n\n***\n\n## 2025-01\n\n- Just finished a machine learning course on Coursera.\n\n- I am working on this personal website, learning Astro and tailwingcss.\n\n- Building my reel procedurally with moviepy.\n\n- Compositing with copernicus in Houdini.\n\n\n[about now](https://nownownow.com/about)","src/content/pages/now.mdx","2c3b0ae17b5151bf","posts",{"id":278,"data":280,"filePath":283,"digest":284,"deferredRender":24},{"title":281,"lastmod":282,"nav":17,"visible":17,"showdate":24},"Posts",["Date","2025-01-07T23:37:32.592Z"],"src/content/pages/posts.mdx","bce701e8cfbfc096","resume",{"id":285,"data":287,"body":290,"filePath":291,"digest":292,"deferredRender":24},{"title":288,"lastmod":289,"nav":24,"visible":24,"showdate":24},"Reel & Resume",["Date","2025-07-10T19:36:18.634Z"],"import {Vimeo} from 'astro-embed';\n\n\u003Cdiv>\u003CVimeo id =\"1071301168\" />\u003C/div>\n\n[Resume](/Benjamin_Chan_Fx_Resume.pdf)","src/content/pages/resume.mdx","c8a64213723ca10c"]